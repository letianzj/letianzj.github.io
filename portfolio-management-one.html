<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="bokhEjod5-cme1ZueY6aAPHORfnXv9hSoljSfg2Vp_Q">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"letianzj.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="This post discusses the basic practices of portfolio management and mean-variance portfolio optimization, including Efficient Frontier, Global Minimum Variance, Tangency Portfolio, and their implement">
<meta property="og:type" content="article">
<meta property="og:title" content="Portfolio Management | Portfolio Optimization Basics">
<meta property="og:url" content="https://letianzj.github.io/portfolio-management-one.html">
<meta property="og:site_name" content="Quantitative Trading and Systematic Investing">
<meta property="og:description" content="This post discusses the basic practices of portfolio management and mean-variance portfolio optimization, including Efficient Frontier, Global Minimum Variance, Tangency Portfolio, and their implement">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://letianzj.github.io/portfolio-management-one/risk_return_tradeoff.png">
<meta property="og:image" content="https://letianzj.github.io/portfolio-management-one/risk_return_tradeoff.png">
<meta property="og:image" content="https://letianzj.github.io/portfolio-management-one/efficient_frontier.png">
<meta property="og:image" content="https://letianzj.github.io/portfolio-management-one/allocation_transition.png">
<meta property="article:published_time" content="2017-10-23T02:00:00.000Z">
<meta property="article:modified_time" content="2020-09-04T21:31:45.994Z">
<meta property="article:author" content="Letian Wang">
<meta property="article:tag" content="Portfolio Management">
<meta property="article:tag" content="Portfolio Optimization">
<meta property="article:tag" content="Asset Allocation">
<meta property="article:tag" content="Portfolio Allocation">
<meta property="article:tag" content="Efficient Frontier">
<meta property="article:tag" content="Risk Allocation">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://letianzj.github.io/portfolio-management-one/risk_return_tradeoff.png">

<link rel="canonical" href="https://letianzj.github.io/portfolio-management-one.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Portfolio Management | Portfolio Optimization Basics | Quantitative Trading and Systematic Investing</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109341958-2"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-109341958-2');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Quantitative Trading and Systematic Investing</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Letian Wang Blog on Quant Trading and Portfolio Management</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://letianzj.github.io/portfolio-management-one.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Letian Wang">
      <meta itemprop="description" content="Letian Wang blog to discuss quantitative trading strategies, portfolio management, risk premia, risk management, systematic trading, and machine learning, deep learning applications in Finance.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Quantitative Trading and Systematic Investing">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Portfolio Management | Portfolio Optimization Basics
        </h1>

        <div class="post-meta">

        
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-22 22:00:00" itemprop="dateCreated datePublished" datetime="2017-10-22T22:00:00-04:00">2017-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-04 17:31:45" itemprop="dateModified" datetime="2020-09-04T17:31:45-04:00">2020-09-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Systematic-Investment/" itemprop="url" rel="index"><span itemprop="name">Systematic Investment</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Systematic-Investment/Portfolio-Management/" itemprop="url" rel="index"><span itemprop="name">Portfolio Management</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/portfolio-management-one.html#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="portfolio-management-one.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>This post discusses the basic practices of portfolio management and mean-variance portfolio optimization, including Efficient Frontier, Global Minimum Variance, Tangency Portfolio, and their implementations in Python.</p>
<h2 id="introduction">Introduction</h2>
<p>Modern Portfolio Theory (MPT) studies the tradeoff between return and risk. The risk of a portfolio is determined by not only the variance but also the correlations among assets. For a given risk, a rational investor would prefer an allocation with a higher expected returns; On the other hand, for a given return, he or she would prefer the portfolio with a lower risk level. This is a typical dual optimization problem.</p>
<a id="more"></a>
<p>This post examines the classic mean-variance portfolio optimization from computational mathematics' perspective, with mathematical formulas and programming codes. We will use real world stock data from Quandl.</p>
<p>Assume we have <span class="math inline">\(n\)</span> assets and their expected return column vector is <span class="math inline">\(\mu\)</span> and their covariance matrix is <span class="math inline">\(\Sigma\)</span>. Then the return and variance of a portfolio that invests in these n assets with weight <span class="math inline">\(w\)</span> are, respectively,</p>
<p><span class="math display">\[
\begin{matrix}
\mu_p &amp;=&amp; w^T\mu \\\\
\sigma_p^2 &amp;=&amp; w^T\Sigma w          \tag{1.1}
\end{matrix}
\]</span></p>
<p>In addition, the covariance between two portfolios of respective weights <span class="math inline">\(w_1\)</span> and <span class="math inline">\(w_2\)</span>, is</p>
<p><span class="math display">\[
\rho_{12}=cov(w_1^T\mu,w_2^T\mu)=w_1^T\Sigma w_2            \tag{1.2}
\]</span></p>
<p>Let's illustrate this with some codes. First let's download the historical data.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">assets = [<span class="string">'AAPL'</span>,       <span class="comment"># Apple</span></span><br><span class="line">          <span class="string">'KO'</span>,         <span class="comment"># Coca-Cola</span></span><br><span class="line">          <span class="string">'DIS'</span>,        <span class="comment"># Disney</span></span><br><span class="line">          <span class="string">'XOM'</span>,        <span class="comment"># Exxon Mobil</span></span><br><span class="line">          <span class="string">'JPM'</span>,        <span class="comment"># JPMorgan Chase</span></span><br><span class="line">          <span class="string">'MCD'</span>,        <span class="comment"># McDonald's</span></span><br><span class="line">          <span class="string">'WMT'</span>]         <span class="comment"># Walmart</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># download historical data from quandl</span></span><br><span class="line">hist_data = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> asset <span class="keyword">in</span> assets:</span><br><span class="line">    data = quandl.get(<span class="string">'wiki/'</span>+asset, start_date=<span class="string">'2015-01-01'</span>, end_date=<span class="string">'2017-12-31'</span>, authtoken=<span class="string">'your_quandl_token'</span>)</span><br><span class="line">    hist_data[asset] = data[<span class="string">'Adj. Close'</span>]</span><br><span class="line">hist_data = pd.concat(hist_data, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># calculate historical log returns</span></span><br><span class="line">hist_return = np.log(hist_data / hist_data.shift())</span><br><span class="line">hist_return = hist_return.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment"># find historical mean, covriance, and correlation</span></span><br><span class="line">hist_mean = hist_return.mean(axis=<span class="number">0</span>).to_frame()</span><br><span class="line">hist_mean.columns = [<span class="string">'mu'</span>]</span><br><span class="line">hist_cov = hist_return.cov()</span><br><span class="line">hist_corr = hist_return.corr()</span><br><span class="line">print(hist_mean.transpose())</span><br><span class="line">print(hist_cov)</span><br><span class="line">print(hist_corr)</span><br></pre></td></tr></table></figure>
<p>Here the historical window is set to be between 2015/01/01 and 2017/12/31 for the results to be reproducible. The return and correlation in this time range are as follows.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># average daily return</span></span><br><span class="line">        AAPL       DIS       JPM       KO       MCD       WMT       XOM</span><br><span class="line">mu  <span class="number">0.000619</span>  <span class="number">0.000237</span>  <span class="number">0.000811</span>  <span class="number">0.00023</span>  <span class="number">0.000918</span>  <span class="number">0.000269</span>  <span class="number">0.000007</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># daily return covariance</span></span><br><span class="line">          AAPL       DIS       JPM        KO       MCD       WMT       XOM</span><br><span class="line">AAPL  <span class="number">0.000208</span>  <span class="number">0.000055</span>  <span class="number">0.000076</span>  <span class="number">0.000032</span>  <span class="number">0.000044</span>  <span class="number">0.000038</span>  <span class="number">0.000051</span></span><br><span class="line">DIS   <span class="number">0.000055</span>  <span class="number">0.000138</span>  <span class="number">0.000072</span>  <span class="number">0.000030</span>  <span class="number">0.000032</span>  <span class="number">0.000031</span>  <span class="number">0.000048</span></span><br><span class="line">JPM   <span class="number">0.000076</span>  <span class="number">0.000072</span>  <span class="number">0.000181</span>  <span class="number">0.000032</span>  <span class="number">0.000052</span>  <span class="number">0.000038</span>  <span class="number">0.000080</span></span><br><span class="line">KO    <span class="number">0.000032</span>  <span class="number">0.000030</span>  <span class="number">0.000032</span>  <span class="number">0.000065</span>  <span class="number">0.000034</span>  <span class="number">0.000031</span>  <span class="number">0.000033</span></span><br><span class="line">MCD   <span class="number">0.000044</span>  <span class="number">0.000032</span>  <span class="number">0.000052</span>  <span class="number">0.000034</span>  <span class="number">0.000102</span>  <span class="number">0.000032</span>  <span class="number">0.000036</span></span><br><span class="line">WMT   <span class="number">0.000038</span>  <span class="number">0.000031</span>  <span class="number">0.000038</span>  <span class="number">0.000031</span>  <span class="number">0.000032</span>  <span class="number">0.000150</span>  <span class="number">0.000029</span></span><br><span class="line">XOM   <span class="number">0.000051</span>  <span class="number">0.000048</span>  <span class="number">0.000080</span>  <span class="number">0.000033</span>  <span class="number">0.000036</span>  <span class="number">0.000029</span>  <span class="number">0.000132</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># daily return correlation</span></span><br><span class="line">          AAPL       DIS       JPM        KO       MCD       WMT       XOM</span><br><span class="line">AAPL  <span class="number">1.000000</span>  <span class="number">0.325700</span>  <span class="number">0.390836</span>  <span class="number">0.275779</span>  <span class="number">0.303736</span>  <span class="number">0.213516</span>  <span class="number">0.309552</span></span><br><span class="line">DIS   <span class="number">0.325700</span>  <span class="number">1.000000</span>  <span class="number">0.456748</span>  <span class="number">0.317669</span>  <span class="number">0.273237</span>  <span class="number">0.218224</span>  <span class="number">0.351940</span></span><br><span class="line">JPM   <span class="number">0.390836</span>  <span class="number">0.456748</span>  <span class="number">1.000000</span>  <span class="number">0.293271</span>  <span class="number">0.381535</span>  <span class="number">0.230407</span>  <span class="number">0.516903</span></span><br><span class="line">KO    <span class="number">0.275779</span>  <span class="number">0.317669</span>  <span class="number">0.293271</span>  <span class="number">1.000000</span>  <span class="number">0.423076</span>  <span class="number">0.309700</span>  <span class="number">0.357156</span></span><br><span class="line">MCD   <span class="number">0.303736</span>  <span class="number">0.273237</span>  <span class="number">0.381535</span>  <span class="number">0.423076</span>  <span class="number">1.000000</span>  <span class="number">0.259506</span>  <span class="number">0.311606</span></span><br><span class="line">WMT   <span class="number">0.213516</span>  <span class="number">0.218224</span>  <span class="number">0.230407</span>  <span class="number">0.309700</span>  <span class="number">0.259506</span>  <span class="number">1.000000</span>  <span class="number">0.203070</span></span><br><span class="line">XOM   <span class="number">0.309552</span>  <span class="number">0.351940</span>  <span class="number">0.516903</span>  <span class="number">0.357156</span>  <span class="number">0.311606</span>  <span class="number">0.203070</span>  <span class="number">1.000000</span></span><br></pre></td></tr></table></figure>
<p>Now let's use Monte Carlo simulation to contruct 5,000 portfolios with random generated weights <span class="math inline">\(w\)</span>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># construct random portfolios</span></span><br><span class="line">n_portfolios = <span class="number">5000</span></span><br><span class="line"><span class="comment">#set up array to hold results</span></span><br><span class="line">port_returns = np.zeros(n_portfolios)</span><br><span class="line">port_stdevs = np.zeros(n_portfolios)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(n_portfolios):</span><br><span class="line">    w = np.random.rand(len(assets))        <span class="comment"># random weights</span></span><br><span class="line">    w = w / sum(w)                         <span class="comment"># weights sum to 1</span></span><br><span class="line">    port_return = np.dot(w.T, hist_mean.as_matrix()) * <span class="number">250</span>         <span class="comment"># annualize; 250 business days</span></span><br><span class="line">    port_stdev = np.sqrt(np.dot(w.T, np.dot(hist_cov, w))) * np.sqrt(<span class="number">250</span>)  <span class="comment"># annualize; 250 business days</span></span><br><span class="line">    port_returns[i] = port_return</span><br><span class="line">    port_stdevs[i] = port_stdev</span><br><span class="line"></span><br><span class="line">plt.plot(port_stdevs, port_returns, <span class="string">'o'</span>, markersize=<span class="number">6</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Expected Volatility'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Expected Return'</span>)</span><br><span class="line">plt.title(<span class="string">'Return and Standard Deviation of Randomly Generated Portfolios'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/portfolio-management-one/risk_return_tradeoff.png" class="" title="Risk Return Tradeoff">
<!--<img src="/portfolio-management-one/risk_return_tradeoff.png" width="50%" height="50%"  style="margin: 0 auto;"/>-->
<p>As you can see, asset allocation makes a difference. Some portfolios are superior to others; achieving higher returns at the cost of lower risks. This is where the professional portfolio managers can add value to. So how to choose a good allocation? We will explore some basic solutions in the following sections.</p>
<h2 id="global-minimum-variance-gmv">Global Minimum Variance (GMV)</h2>
<p>Of all the portfolios in figure 1, Global Minimum Variance (GMV) is the far left one. It is the lowest risk one can achieve by holding the seven stocks above. Mathematically, to find the Global Minimum Variance Portfolio, we need to solve</p>
<p><span class="math display">\[
\begin{matrix}
\min &amp; \sigma^2=w^T\Sigma w \\\\
s.t. &amp; w^T\mathbf{1} = 1
\end{matrix}            \tag{2.1}
\]</span></p>
<p>The Lagrangian for this problem is</p>
<p><span class="math display">\[
L(w,\lambda)=w^T\Sigma w+\lambda(w^T\mathbf{1}-1)       \tag{2.2}
\]</span></p>
<p>and its first order condition is</p>
<p><span class="math display">\[
\begin{matrix}
\frac{\partial L}{\partial w} &amp;=&amp;w^T(\Sigma +\Sigma^T)+\lambda \mathbf{1}^T &amp;=&amp; 0 \\\\
\frac{\partial L}{\partial \lambda} &amp;=&amp; w^T\mathbf{1} -1 &amp;=&amp; 0
\end{matrix}            \tag{2.3}
\]</span></p>
<p>To solve this system of two equations, first we solve for w from the first equation</p>
<p><span class="math display">\[
w = -\frac{1}{2}\lambda\Sigma^{-1}\mathbf{1}            \tag{2.4}
\]</span></p>
<p>Then we put it into the second equation to solve <span class="math inline">\(\lambda\)</span>,</p>
<p><span class="math display">\[
\begin{matrix}
w^T\mathbf{1}&amp;=&amp;(-\frac{1}{2}\lambda \mathbf{1}^T\Sigma^{-1})\mathbf{1}=1 \\\\
 &amp;\Rightarrow&amp; \lambda = -\frac{2}{\mathbf{1}^T\Sigma^{-1}\mathbf{1}}
\end{matrix}                \tag{2.5}
\]</span></p>
<p>Finally substitute <span class="math inline">\(\lambda\)</span> back to solve for the optimal <span class="math inline">\(w\)</span></p>
<p><span class="math display">\[
w^*=\frac{\Sigma^{-1}\mathbf{1}}{\mathbf{1}^T\Sigma^{-1}\mathbf{1}}         \tag{2.6}
\]</span></p>
<p>The following code snippet provides the close form solution via (2.6) <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global Minimum Variance (GMV) -- closed form</span></span><br><span class="line">hist_cov_inv = - np.linalg.inv(hist_cov)</span><br><span class="line">one_vec = np.ones(len(assets))</span><br><span class="line">w_gmv = np.dot(hist_cov_inv, one_vec) / (np.dot(np.transpose(one_vec), np.dot(hist_cov_inv, one_vec)))</span><br><span class="line">w_gmv_df = pd.DataFrame(data = w_gmv).transpose()</span><br><span class="line">w_gmv_df.columns = assets</span><br><span class="line">stdev_gmv = np.sqrt(np.dot(w_gmv.T, np.dot(hist_cov, w_gmv))) * np.sqrt(<span class="number">250</span>)</span><br><span class="line">print(w_gmv_df)</span><br><span class="line">print(stdev_gmv)</span><br></pre></td></tr></table></figure></p>
<p>Alternatively, we can use Python quadratic solver to solve (2.1) numerically. It should yield the same answer. Here we use the Python cvxopt package. For additional information, please refer to their <a href="http://cvxopt.org/userguide/coneprog.html#cvxopt.solvers.qp" target="_blank" rel="noopener">online documentation</a> and <a href="http://cvxopt.org/examples/book/portfolio.html" target="_blank" rel="noopener">online example</a>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global Minimum Variance (GMV) -- numerical</span></span><br><span class="line">P = matrix(hist_cov.as_matrix())</span><br><span class="line">q = matrix(np.zeros((len(assets), <span class="number">1</span>)))</span><br><span class="line">A = matrix(<span class="number">1.0</span>, (<span class="number">1</span>, len(assets)))</span><br><span class="line">b = matrix(<span class="number">1.0</span>)</span><br><span class="line">w_gmv_v2 = np.array(solvers.qp(P, q, A=A, b=b)[<span class="string">'x'</span>])</span><br><span class="line">w_gmv_df_v2 = pd.DataFrame(w_gmv_v2).transpose()</span><br><span class="line">w_gmv_df_v2.columns = assets</span><br><span class="line">stdev_gmv_v2 = np.sqrt(np.dot(w_gmv_v2.T, np.dot(hist_cov, w_gmv_v2))) * np.sqrt(<span class="number">250</span>)</span><br><span class="line">print(w_gmv_df_v2)</span><br><span class="line">print(np.asscalar(stdev_gmv_v2))</span><br></pre></td></tr></table></figure>
<p>Both methods yield the following optimal weights.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GMV weights</span></span><br><span class="line">       AAPL        KO       DIS       XOM      JPM       MCD       WMT</span><br><span class="line"><span class="number">0</span>  <span class="number">0.038996</span>  <span class="number">0.122932</span> <span class="number">-0.014062</span>  <span class="number">0.428003</span>  <span class="number">0.18088</span>  <span class="number">0.128547</span>  <span class="number">0.114705</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># GMV standard deviation</span></span><br><span class="line"><span class="number">0.10759482208087719</span></span><br></pre></td></tr></table></figure>
<h2 id="efficient-portfolio">Efficient Portfolio</h2>
<p>To find an efficient portfolio other than GMV, we face a dual optimization problem. The primary problem finds highest return given a certain risk level <span class="math inline">\(\sigma_o\)</span></p>
<p><span class="math display">\[
\begin{matrix}
\max &amp; \mu_p=w^T\mu \\\\
s.t. &amp; \sigma_p^2=w^T\Sigma w=\sigma_{o}\\
     &amp; w^T\mathbf{1}=1
\end{matrix}                \tag{3.1}
\]</span></p>
<p>while its dual finds the minimum risk given a certain return level <span class="math inline">\(\mu_o\)</span></p>
<p><span class="math display">\[
\begin{matrix}
\min &amp; \sigma_p^2=w^T\Sigma w \\\\
s.t. &amp; \mu_p=w^T\mu=\mu_{o} \\\\
     &amp; w^T\mathbf{1} = 1
\end{matrix}                \tag{3.2}
\]</span></p>
<p>It is more common to solve the dual minimization problem (3.2), whose Lagrangian function is given by</p>
<p><span class="math display">\[
L(w,\lambda_1, \lambda_2)=w^T\Sigma w + \lambda_1(w^T\mu-\mu_o) + \lambda_2(w^T\mathbf{1}-1)
\tag{3.3}
\]</span></p>
<p>and its first order condition is</p>
<p><span class="math display">\[
\begin{matrix}
2\Sigma w + \lambda_1\mu + \lambda_2 \mathbf{1} &amp;=&amp; 0 \\\\
w^T \mu-\mu_o &amp;=&amp; 0 \\\\
w^T\mathbf{1} - 1 &amp;=&amp; 0
\end{matrix}            \tag{3.4}
\]</span></p>
<p>Similarily, from the first equation we have</p>
<p><span class="math display">\[
w=-\frac{1}{2}\lambda_1\Sigma^{-1}\mu-\frac{1}{2}\lambda_2\Sigma^{-1}\mathbf{1}
\tag{3.5}
\]</span></p>
<p>and put it into the last two equations to get the matrix format of <span class="math inline">\(\lambda=[\lambda_1;\lambda_2]\)</span> as</p>
<p><span class="math display">\[
-\frac{1}{2}\begin{pmatrix} \mu^T\Sigma^{-1}\mu &amp; \mu^T\Sigma^{-1}\mathbf{1} \\\\ \mu^T\Sigma^{-1}\mathbf{1} &amp; \mathbf{1}^T\Sigma^{-1}\mathbf{1} \end{pmatrix} \begin{pmatrix}\lambda_1 \\\\ \lambda_2\end{pmatrix} = \begin{pmatrix}\mu_o \\\\ 1\end{pmatrix}
\tag{3.6}
\]</span></p>
<p>which yields</p>
<p><span class="math display">\[
\begin{matrix}
\lambda &amp;=&amp;\begin{pmatrix}\lambda_1 \\\\ \lambda_2 \end{pmatrix}=-2A^{-1}y  \\\\
A &amp;=&amp; \begin{pmatrix} \mu^T\Sigma^{-1}\mu &amp; \mu^T\Sigma^{-1}\mathbf{1} \\\\ \mu^T\Sigma^{-1}\mathbf{1} &amp; \mathbf{1}^T\Sigma^{-1}\mathbf{1} \end{pmatrix} \\\\
y &amp;=&amp; \begin{pmatrix}\mu_o \\\\ 1\end{pmatrix}
\end{matrix}
\tag{3.7}
\]</span></p>
<p>In the end, substitute <span class="math inline">\(\lambda\)</span> back to solve for the optimal w as</p>
<p><span class="math display">\[
\begin{matrix}
w^*&amp;=&amp;-\frac{1}{2}\Sigma^{-1}B\lambda=\Sigma^{-1}BA^{-1}y \\\\
B&amp;=&amp;[\mu;\mathbf{1}]
\end{matrix}
\tag{3.8}
\]</span></p>
<p>The following code finds minimum risk portfolio with a given return level <span class="math inline">\(\mu_o=max(\mu)\)</span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Maximum return -- closed form</span></span><br><span class="line">mu_o = np.asscalar(np.max(hist_mean))   <span class="comment"># MCD</span></span><br><span class="line">A = np.matrix([[np.asscalar(np.dot(hist_mean.T,np.dot(hist_cov_inv,hist_mean))),</span><br><span class="line">                np.asscalar(np.dot(hist_mean.T,np.dot(hist_cov_inv,one_vec)))],</span><br><span class="line">               [np.asscalar(np.dot(hist_mean.T,np.dot(hist_cov_inv,one_vec))),</span><br><span class="line">                np.asscalar(np.dot(one_vec.T,np.dot(hist_cov_inv,one_vec)))]])</span><br><span class="line">B = np.hstack([np.array(hist_mean),one_vec.reshape(len(assets),<span class="number">1</span>)])</span><br><span class="line">y = np.matrix([mu_o, <span class="number">1</span>]).T</span><br><span class="line">w_max_ret = np.dot(np.dot(np.dot(hist_cov_inv, B),  np.linalg.inv(A)),y)</span><br><span class="line">w_max_ret_df = pd.DataFrame(w_max_ret).T</span><br><span class="line">w_max_ret_df.columns = assets</span><br><span class="line">print(w_max_ret_df)</span><br></pre></td></tr></table></figure>
<p>As an alternative, we can solve numerically <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Maximum return -- numerical</span></span><br><span class="line">P = matrix(hist_cov.as_matrix())</span><br><span class="line">q = matrix(np.zeros((len(assets), <span class="number">1</span>)))</span><br><span class="line">A = matrix(np.hstack([np.array(hist_mean),one_vec.reshape(len(assets),<span class="number">1</span>)]).transpose())</span><br><span class="line">b = matrix([mu_o,<span class="number">1</span>])</span><br><span class="line">w_max_ret_v2 = np.array(solvers.qp(P, q, A=A, b=b)[<span class="string">'x'</span>])</span><br><span class="line">w_max_ret_df_v2 = pd.DataFrame(w_max_ret_v2).transpose()</span><br><span class="line">w_max_ret_df_v2.columns = assets</span><br><span class="line">print(w_max_ret_df_v2)</span><br></pre></td></tr></table></figure></p>
<p>Both methods yield the following optimal weights.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># max return weights</span></span><br><span class="line">       AAPL        KO       DIS       XOM       JPM       MCD       WMT</span><br><span class="line"><span class="number">0</span>  <span class="number">0.097223</span> <span class="number">-0.010082</span>  <span class="number">0.257571</span>  <span class="number">0.183309</span>  <span class="number">0.647928</span>  <span class="number">0.059439</span> <span class="number">-0.235389</span></span><br></pre></td></tr></table></figure>
<h2 id="efficient-frontier">Efficient Frontier</h2>
<p>The previous section finds the minimum risk portfolio for a given return level. When we traverse all possible return levels, we get a set of optimal portfolios known as efficient frontier.</p>
<p>Alternatively, accordingly to <a href="https://en.wikipedia.org/wiki/Modern_portfolio_theory#Two_mutual_fund_theorem" target="_blank" rel="noopener">Two_mutual_fund_theorem</a>, it turns out we can construct the efficient frontier as a linear combination of the previous two portfolios, GMV and maximum return.</p>
<p>The code is similar to previous section except for a loop to traverse N target returns.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># efficient frontier</span></span><br><span class="line">N = <span class="number">100</span></span><br><span class="line">ef_left = np.asscalar(min(hist_mean.as_matrix()))          <span class="comment"># minimum return</span></span><br><span class="line">ef_right = np.asscalar(max(hist_mean.as_matrix()))         <span class="comment"># maximum return</span></span><br><span class="line">target_returns = np.linspace(ef_left, ef_right, N)         <span class="comment"># N target returns</span></span><br><span class="line">optimal_weights = [ solvers.qp(P, q, A=A, b=matrix([t,<span class="number">1</span>]))[<span class="string">'x'</span>] <span class="keyword">for</span> t <span class="keyword">in</span> target_returns ]    <span class="comment"># QP solver</span></span><br><span class="line">ef_returns = [ np.asscalar(np.dot(w.T, hist_mean.as_matrix())*<span class="number">250</span>) <span class="keyword">for</span> w <span class="keyword">in</span> optimal_weights ]         <span class="comment">#a nnualized</span></span><br><span class="line">ef_risks = [ np.asscalar(np.sqrt(np.dot(w.T, np.dot(hist_cov, w)) * <span class="number">250</span>)) <span class="keyword">for</span> w <span class="keyword">in</span> optimal_weights ]</span><br><span class="line"></span><br><span class="line">plt.plot(port_stdevs, port_returns, <span class="string">'o'</span>, markersize=<span class="number">6</span>, label=<span class="string">'Candidate Market Portfolio'</span>)</span><br><span class="line">plt.plot(ef_risks, ef_returns, <span class="string">'y-o'</span>, color=<span class="string">'green'</span>, markersize=<span class="number">8</span>, label=<span class="string">'Efficient Frontier'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Expected Volatility'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Expected Return'</span>)</span><br><span class="line">plt.title(<span class="string">'Efficient Frontier and Candidate Portfolios'</span>)</span><br><span class="line">plt.legend(loc=<span class="string">'best'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/portfolio-management-one/efficient_frontier.png" class="" title="Efficient Frontier">
<p>We can visualize the weight allocation transition matrix of efficient portfolios from low returns to high returns.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">transition_data = pd.DataFrame(optimal_weights)</span><br><span class="line">transition_data.columns = assets</span><br><span class="line">plt.stackplot(range(<span class="number">50</span>), transition_data.iloc[:<span class="number">50</span>,:].T, labels=assets)             <span class="comment"># the other half has negative weights</span></span><br><span class="line">plt.legend(loc=<span class="string">'upper left'</span>)</span><br><span class="line">plt.margins(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">plt.title(<span class="string">'Allocation Transition Matrix'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<img src="/portfolio-management-one/allocation_transition.png" class="" title="Asset Allocation Transition Matrix">
<p>The transition figure tells us that for low returns it suffices to hold only five stocks. As we demand higher and higher returns, we start to hold JPM and then DIS.</p>
<h2 id="tangency-portfolio">Tangency Portfolio</h2>
<p>Another interesting portfolio is tangency portfolio that maximizes <a href="https://en.wikipedia.org/wiki/Sharpe_ratio" target="_blank" rel="noopener">Sharpe Ratio</a>, one of the most popular measures for performance evaluation.</p>
<p>Denote risk free interest rate as <span class="math inline">\(r_f\)</span>, tangency portfolio targets the following equation,</p>
<p><span class="math display">\[
\begin{matrix}
\max &amp; \frac{\mu_p-r_f}{\sigma_p} = \frac{w^T\mu-r_f}{(w^T\Sigma w)^{\frac{1}{2}}} \\\\
s.t. &amp; w^T\mathbf{1}=1
\end{matrix}
\tag{5.1}
\]</span></p>
<p>Because of the denominator, solve it directly via Lagrangian would be complicated. Fortunately we can be a bit creative and actually take advantage of the division format. Here is the intuitive approach. First, note that the ojective function is invariant with respect to leverage. In other words, it remains the same if we double the weight <span class="math inline">\(w\)</span>. Therefore the contraint can be ignored as long as <span class="math inline">\(w\)</span> will be normalized in the end.</p>
<p>Secondly, if we knew the expected return <span class="math inline">\(r_o\)</span> of the tangent portfolio, it must satisfy the following:</p>
<p><span class="math display">\[
\begin{matrix}
\max &amp; w^T\Sigma w \\\\
s.t. &amp; w^T(\mu-r_f\mathbf{1})=r_o
\end{matrix}
\tag{5.2}
\]</span></p>
<p>Solving this similarily to the previous section, it gives</p>
<p><span class="math display">\[
w=\frac{r_0}{(\mu-r_f\mathbf{1})^T\Sigma^{-1}(\mu-r_f\mathbf{1})}(\Sigma^{-1}(\mu-r_f\mathbf{1}))
\tag{5.3}
\]</span></p>
<p>By normalizing it, the arbitrary target expected return <span class="math inline">\(r_o\)</span> actually goes away, leaving the optimal allocation as</p>
<p><span class="math display">\[
w^*=\frac{\Sigma^{-1}(\mu-r_f\mathbf{1})}{\mathbf{1}^T\Sigma^{-1}(\mu-r_f\mathbf{1})}
\tag{5.4}
\]</span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Maximum sharpe -- closed form</span></span><br><span class="line">r_f = <span class="number">0.01</span></span><br><span class="line">w_sharpe = np.dot(hist_cov_inv, hist_mean.as_matrix()-r_f/<span class="number">250</span>) / np.dot(one_vec, np.dot(hist_cov_inv, hist_mean.as_matrix()-r_f/<span class="number">250</span>))</span><br><span class="line">w_sharpe_df = pd.DataFrame(w_sharpe).T</span><br><span class="line">w_sharpe_df.columns = assets</span><br><span class="line">mu_sharpe = np.dot(w_sharpe.T, hist_mean.as_matrix()) * <span class="number">250</span></span><br><span class="line">stdev_sharpe = np.sqrt(np.dot(w_sharpe.T, np.dot(hist_cov, w_sharpe))) * np.sqrt(<span class="number">250</span>)</span><br><span class="line">sharpe_ratio = (mu_sharpe-r_f)/stdev_sharpe</span><br><span class="line">print(w_sharpe_df)</span><br><span class="line">print(mu_sharpe)</span><br><span class="line">print(stdev_sharpe)</span><br><span class="line">print(sharpe_ratio)</span><br></pre></td></tr></table></figure>
<p>Alternatively, we can use scipy package to solve numerically equation (5.1)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> minimize</span><br><span class="line"></span><br><span class="line">fun = <span class="keyword">lambda</span> w: <span class="number">-1</span> * np.dot(w.T, hist_mean.as_matrix()*<span class="number">250</span>-r_f) / np.sqrt(np.dot(w.T, np.dot(hist_cov*<span class="number">250</span>, w)))</span><br><span class="line">cons = (&#123;<span class="string">'type'</span>: <span class="string">'eq'</span>, <span class="string">'fun'</span>: <span class="keyword">lambda</span> w:  np.dot(w.T, one_vec)<span class="number">-1</span>&#125;)</span><br><span class="line">res = minimize(fun, w_gmv, method=<span class="string">'SLSQP'</span>, constraints=cons)</span><br><span class="line">w_sharpe_v2 = res[<span class="string">'x'</span>]</span><br><span class="line">w_sharpe_v2_df = pd.DataFrame(w_sharpe_v2).T</span><br><span class="line">w_sharpe_v2_df.columns = assets</span><br><span class="line">mu_sharpe_v2 = np.dot(w_sharpe_v2.T, hist_mean.as_matrix()) * <span class="number">250</span></span><br><span class="line">stdev_sharpe_v2 = np.sqrt(np.dot(w_sharpe_v2.T, np.dot(hist_cov, w_sharpe_v2))) * np.sqrt(<span class="number">250</span>)</span><br><span class="line">sharpe_ratio_v2 = (mu_sharpe-r_f)/stdev_sharpe</span><br><span class="line">print(w_sharpe_v2_df)</span><br><span class="line">print(mu_sharpe_v2)</span><br><span class="line">print(stdev_sharpe_v2)</span><br><span class="line">print(sharpe_ratio_v2)</span><br></pre></td></tr></table></figure>
<p>Again they yield the same weights and sharpe ratio.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># optimal weights</span></span><br><span class="line">       AAPL       KO       DIS       XOM      JPM       MCD       WMT</span><br><span class="line"><span class="number">0</span>  <span class="number">0.180333</span> <span class="number">-0.20005</span>  <span class="number">0.645626</span> <span class="number">-0.166332</span>  <span class="number">1.31512</span> <span class="number">-0.039335</span> <span class="number">-0.735362</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># maximum sharpe</span></span><br><span class="line">[ <span class="number">1.66390903</span>]</span><br></pre></td></tr></table></figure>
<p>We will revisit the tangible portfolio in the future section of <a href="https://en.wikipedia.org/wiki/Capital_asset_pricing_model" target="_blank" rel="noopener">CAPM</a>. The figures will make more sense once no short sale constraint is added.</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="http://faculty.chicagobooth.edu/john.cochrane/teaching/asset_pricing.htm" target="_blank" rel="noopener">Asset Pricing -- John Cochrane</a></li>
<li><a href="https://www.packtpub.com/big-data-and-business-intelligence/python-finance-second-edition" target="_blank" rel="noopener">Python for Finance Second Edition -- Yuxing Yan</a></li>
<li><a href="https://systematicinvestor.wordpress.com/2013/03/22/maximum-sharpe-portfolio/" target="_blank" rel="noopener">Maximum Sharpe Portfolio in R -- Michael Kapler</a></li>
</ul>
<p><strong>DISCLAIMER: This post is for the purpose of research and backtest only. The author doesn't promise any future profits and doesn't take responsibility for any trading losses.</strong></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Letian Wang
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://letianzj.github.io/portfolio-management-one.html" title="Portfolio Management | Portfolio Optimization Basics">https://letianzj.github.io/portfolio-management-one.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Portfolio-Management/" rel="tag"># Portfolio Management</a>
              <a href="/tags/Portfolio-Optimization/" rel="tag"># Portfolio Optimization</a>
              <a href="/tags/Asset-Allocation/" rel="tag"># Asset Allocation</a>
              <a href="/tags/Portfolio-Allocation/" rel="tag"># Portfolio Allocation</a>
              <a href="/tags/Risk-Allocation/" rel="tag"># Risk Allocation</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/value-at-risk-one.html" rel="next" title="Value at Risk">
      Value at Risk <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#global-minimum-variance-gmv"><span class="nav-number">2.</span> <span class="nav-text">Global Minimum Variance (GMV)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#efficient-portfolio"><span class="nav-number">3.</span> <span class="nav-text">Efficient Portfolio</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#efficient-frontier"><span class="nav-number">4.</span> <span class="nav-text">Efficient Frontier</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tangency-portfolio"><span class="nav-number">5.</span> <span class="nav-text">Tangency Portfolio</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reference"><span class="nav-number">6.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Letian Wang"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Letian Wang</p>
  <div class="site-description" itemprop="description">Letian Wang blog to discuss quantitative trading strategies, portfolio management, risk premia, risk management, systematic trading, and machine learning, deep learning applications in Finance.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/letianzj" title="GitHub  https:&#x2F;&#x2F;github.com&#x2F;letianzj" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:letian.zj@gmail.com" title="E-Mail  mailto:letian.zj@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/letian781" title="Twitter  https:&#x2F;&#x2F;twitter.com&#x2F;letian781" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://youtu.be/CrsrTxqiXNY" title="YouTube  https:&#x2F;&#x2F;youtu.be&#x2F;CrsrTxqiXNY" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/letian-wang-phd-cfa-frm/" title="Linkedin  https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;letian-wang-phd-cfa-frm&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i>Linkedin</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Letian Wang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://https-letianzj-github-io.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://letianzj.github.io/portfolio-management-one.html";
    this.page.identifier = "portfolio-management-one.html";
    this.page.title = "Portfolio Management | Portfolio Optimization Basics";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://https-letianzj-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
